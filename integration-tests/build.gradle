plugins {
    id "java"
}

group "uk.gov.di"
version "unspecified"

repositories {
    mavenCentral()
}

dependencies {
    testImplementation configurations.tests,
            configurations.glassfish,
            configurations.nimbus,
            "com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.13.0",
            "software.amazon.awssdk:sqs:2.17.73",
            "com.amazonaws:aws-java-sdk-dynamodb:1.12.95",
            "org.bouncycastle:bcpkix-jdk15on:1.69",
            "io.lettuce:lettuce-core:6.1.5.RELEASE",
            project(":client-registry-api"),
            project(":frontend-api"),
            project(":account-management-api"),
            project(":oidc-api"),
            project(":shared"),
            project(":shared-test")
    testRuntimeOnly "org.junit.jupiter:junit-jupiter-engine:${dependencyVersions.junit}"
}

test {
    useJUnitPlatform()
    filter {
        includeTestsMatching "*"
    }
    testLogging {
        showStandardStreams = false
    }

    environment "AWS_ACCESS_KEY_ID", "mock-access-key"
    environment "AWS_SECRET_ACCESS_KEY", "mock-secret-key "
    environment "STUB_RELYING_PARTY_REDIRECT_URI", "https://di-auth-stub-relying-party-build.london.cloudapps.digital/"
    environment "LOGIN_URI", "http://localhost:3000/"
    environment "RESET_PASSWORD_URL", "http://localhost:3000/reset-password?code="

    dependsOn ":auditTerraform"
}
